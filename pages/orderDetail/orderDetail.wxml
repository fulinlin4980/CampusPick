<view class="detail-container">

<view class="status-card status-{{task.status}}">
  <view class="status-icon">
    <text wx:if="{{task.status === 'PENDING'}}">â³</text>
    <text wx:elif="{{task.status === 'ACCEPTED'}}">ğŸšš</text>
    <text wx:elif="{{task.status === 'DELIVERED'}}">âœ…</text>
    <text wx:elif="{{task.status === 'COMPLETED'}}">ğŸ‰</text>
    <text wx:elif="{{task.status === 'CANCELLED'}}">âŒ</text>
  </view>
  <view class="status-text-area">
    <view class="status-main-text">{{task.status === 'PENDING' ? 'ç­‰å¾…æ¥å•ä¸­' : task.status}}</view>
    <view class="status-sub-text">
      {{task.status === 'PENDING' ? 'è¯·è€å¿ƒç­‰å¾…çˆ±å¿ƒè·‘è…¿å‘˜å‡ºç°' : ''}}
      {{task.status === 'ACCEPTED' ? 'è·‘è…¿å‘˜æ­£åœ¨è·¯ä¸Šï¼Œè¯·ä¿æŒç”µè¯ç•…é€š' : ''}}
      {{task.status === 'DELIVERED' ? 'è·‘è…¿å‘˜å·²é€è¾¾ï¼Œè¯·ç¡®è®¤æ”¶è´§' : ''}}
      {{task.status === 'COMPLETED' ? 'ä»»åŠ¡å·²åœ†æ»¡å®Œæˆï¼' : ''}}
    </view>
  </view>
</view>

<view class="detail-card">
  <view class="card-title">è®¢å•ä¿¡æ¯</view>
  <view class="detail-item">
    <text class="item-label">ä»»åŠ¡ç±»å‹:</text>
    <text class="item-value type-tag">#{{task.type || 'è·‘è…¿ä»»åŠ¡'}}</text>
  </view>
  <view class="detail-item">
    <text class="item-label">è·‘è…¿è´¹ç”¨:</text>
    <text class="item-value price-text">Â¥{{task.price ? task.price.toFixed(2) : '0.00'}}</text>
  </view>

  <view class="detail-location-group">
    <view class="location-item pickup">
      <view class="location-tag tag-start">å–</view>
      <text class="location-text">{{task.pickupLocation || 'æœªå¡«å†™'}}</text>
    </view>
    <view class="location-item delivery">
      <view class="location-tag tag-end">é€</view>
      <text class="location-text">{{task.deliveryLocation || 'æœªå¡«å†™'}}</text>
    </view>
  </view>

  <view class="detail-description">
    <view class="description-label">å¤‡æ³¨/æè¿°:</view>
    <view class="description-content">{{task.description || 'æ— '}}</view>
  </view>
</view>

<view class="user-card">
  <view class="card-title">ç”¨æˆ·ä¿¡æ¯</view>
  <view class="user-info-row">
    <view class="user-role">å‘å¸ƒè€…:</view>
    <text class="user-name">{{task.creatorName || 'ç”¨æˆ·ID: ' + task.creatorId}}</text>
  </view>
  <view class="user-info-row" wx:if="{{task.acceptorId}}">
    <view class="user-role">æ¥å•äºº:</view>
    <text class="user-name">{{task.acceptorName || 'ç”¨æˆ·ID: ' + task.acceptorId}}</text>
  </view>
</view>

<view style="height: 120rpx;"></view>

</view> <view class="action-bar-wrapper">

<button 
  wx:if="{{task.status === 'PENDING'}}" 
  class="action-button primary-button"
  bindtap="handleAcceptOrder" 
  loading="{{isActionLoading}}"
  disabled="{{isActionLoading}}"
>
  ç¡®è®¤æ¥å•
</button>

<task-card 
  wx:if="{{task.status !== 'PENDING'}}"
  task="{{task}}" 
  currentUserId="{{currentUserId}}" 
  isActionLoading="{{isActionLoading}}"
  requirePhoto="{{requirePhoto}}"
  bind:order-action="handleAction" 
/> 

</view>